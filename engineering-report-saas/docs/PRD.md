# 工程可行性报告AI助手 - MVP产品需求文档

**版本**：1.0  
**日期**：2026-02-25  
**状态**：进行中

---

## 一、产品概述

### 1.1 产品定位
帮助工程咨询工程师通过AI对话快速生成专业、规范的工程可行性研究报告。

### 1.2 核心价值
- 降低报告撰写门槛：无需专业编写经验
- 提高效率：AI生成 vs 人工撰写缩短80%时间
- 保证规范：内置国家标准大纲

### 1.3 目标用户
- 初级咨询工程师
- 小型设计院/咨询公司
- 个人独立咨询师

---

## 二、用户故事

### 故事1：快速生成报告
> 作为一名咨询工程师，我需要撰写一份公路工程可行性报告，但时间紧迫。通过AI助手，我只需告诉它项目基本信息，就能自动生成完整的报告大纲和内容。

### 故事2：选择大纲模板
> 我需要编写不同类型的工程报告，希望系统能提供相应的标准大纲，让我可以直接使用或稍作修改。

### 故事3：导出报告
> 报告生成后，我需要将文档导出为常用格式（Markdown/PDF），方便提交给客户或审批部门。

---

## 三、功能清单

### 3.1 核心功能（P0 - 必须完成）

#### 功能1：AI多轮对话系统
- **描述**：基于LLM的智能对话系统，引导用户完成报告编写
- **功能点**：
  - 智能识别用户意图
  - 逐步引导收集项目信息
  - 自然语言交互
- **验收标准**：
  - 能正确理解"帮我写报告"等意图
  - 能追问缺失的关键信息（项目名称、地点、类型）
  - 对话流畅自然

#### 功能2：项目信息提取
- **描述**：从对话中自动提取关键项目信息
- **提取字段**：
  | 字段 | 说明 | 示例 |
  |------|------|------|
  | projectName | 项目名称 | 成灌高速公路 |
  | projectType | 工程类型 | 公路/市政/生态 |
  | location | 建设地点 | 四川省成都市 |
  | scale | 建设规模 | 50公里 |
  | investment | 投资估算 | 10亿元 |
- **验收标准**：
  - 能准确提取项目名称
  - 能准确识别工程类型（公路/市政/生态）
  - 能提取建设地点

#### 功能3：国家标准大纲模板
- **描述**：内置国家发改委2023年版标准大纲
- **模板类型**：
  - 政府投资项目通用大纲（2023年版）
  - 公路工程大纲
  - 市政工程大纲
  - 生态环境工程大纲
- **大纲结构**（2级目录）：
  ```
  一、概述
    （一）项目概况
    （二）项目单位概况
    （三）编制依据
    （四）主要结论和建议
  二、项目建设背景和必要性
  ...
  ```
- **验收标准**：
  - 大纲包含完整的11章内容
  - 每章有明确的章节标题
  - 支持按行业切换不同模板

#### 功能4：AI报告生成
- **描述**：根据用户信息和选择的模板，AI逐章生成完整报告
- **生成流程**：
  1. 确认项目信息完整
  2. 用户确认"开始生成"
  3. 逐章调用AI生成内容
  4. 整合成完整报告
- **验收标准**：
  - 能生成完整报告（至少3章内容）
  - 生成内容与项目信息相关
  - 内容专业、可读

#### 功能5：报告实时预览
- **描述**：在对话界面右侧实时显示生成的报告内容
- **展示内容**：
  - 报告标题
  - 项目信息摘要
  - 报告大纲
  - 各章节内容
- **验收标准**：
  - 页面布局：左侧对话，右侧报告
  - 能实时更新报告内容
  - 报告内容可滚动查看

#### 功能6：导出功能
- **描述**：将生成的报告导出为文件
- **导出格式**：Markdown（.md）
- **导出流程**：
  1. 点击"导出"按钮
  2. 自动生成文件并下载
  3. 文件名为"项目名称-可行性报告.md"
- **验收标准**：
  - 点击导出按钮能触发下载
  - 下载的Markdown文件内容完整
  - 文件可在主流编辑器中打开

---

### 3.2 用户系统（P1）

#### 功能7：用户注册/登录
- **方式**：手机号+验证码登录
- **流程**：
  1. 输入手机号
  2. 获取验证码
  3. 输入验证码登录
- **验收标准**：
  - 能接收手机验证码
  - 登录成功后显示用户信息
  - 未登录时提示登录

#### 功能8：用户报告存储
- **描述**：保存用户创建的报告
- **存储内容**：
  - 报告标题
  - 项目信息
  - 报告内容
  - 创建时间
- **验收标准**：
  - 报告能自动保存到用户账户
  - 能查看历史报告列表

---

### 3.3 扩展功能（P2）

#### 功能9：积分系统
- **积分获取**：购买（微信支付）
- **积分消耗**：生成报告时扣除
- **积分规则**：
  - 体验包：49元 = 1次报告
  - 标准报告：199元/份

#### 功能10：PDF导出
- **描述**：导出为PDF格式
- **实现方式**：Markdown转PDF

#### 功能11：报告编辑
- **描述**：用户可以手动修改AI生成的内容
- **功能点**：
  - 在线编辑章节内容
  - 保存修改

---

## 四、页面结构

### 4.1 页面清单

| 页面 | 路由 | 说明 |
|------|------|------|
| 首页 | `/` | 引导页，展示产品介绍和登录入口 |
| 工作台 | `/dashboard` | 主工作界面，对话+报告预览 |
| 历史报告 | `/reports` | 用户历史报告列表 |
| 个人中心 | `/profile` | 用户账户信息、积分余额 |

### 4.2 页面详细设计

#### 首页 `/`
- Logo + Slogan
- 功能介绍
- "开始使用"按钮 → 跳转登录或工作台
- 底部：版权信息

#### 工作台 `/dashboard`
```
┌─────────────────────────────────────────────────┐
│  顶部：Logo + 用户信息 + 新建对话               │
├────────────┬────────────────────────────────────┤
│            │                                    │
│  对话区域  │         报告预览区域               │
│            │                                    │
│  - 输入框  │  - 报告标题                        │
│  - 发送    │  - 项目信息                        │
│            │  - 大纲                            │
│            │  - 内容                            │
│            │                                    │
├────────────┴────────────────────────────────────┤
│  底部：导出按钮                                 │
└─────────────────────────────────────────────────┘
```

#### 历史报告 `/reports`
- 报告列表（表格/卡片）
- 点击查看详情
- 支持删除

---

## 五、数据模型

### 5.1 核心实体

#### 用户（User）
```typescript
interface User {
  id: string;
  phone: string;
  nickname?: string;
  balance: number;  // 积分余额
  createdAt: string;
}
```

#### 项目信息（Project）
```typescript
interface Project {
  id: string;
  userId: string;
  name: string;
  type: 'highway' | 'municipal' | 'ecology';
  location: string;
  scale?: string;
  investment?: string;
  status: 'draft' | 'completed';
  createdAt: string;
}
```

#### 报告（Report）
```typescript
interface Report {
  id: string;
  userId: string;
  projectId: string;
  title: string;
  templateId: string;
  sections: {
    id: string;
    title: string;
    content: string;
  }[];
  createdAt: string;
  updatedAt: string;
}
```

#### 大纲模板（Template）
```typescript
interface Template {
  id: string;
  name: string;
  industry: string;
  type: 'government' | 'enterprise';
  sections: {
    id: string;
    title: string;
    children: {
      id: string;
      title: string;
      description?: string;
    }[];
  }[];
  isSystem: boolean;
  isPublic: boolean;
}
```

---

## 六、技术架构

### 6.1 技术栈

| 层级 | 技术 | 说明 |
|------|------|------|
| 前端 | Next.js + React | Web应用 |
| 后端 | Next.js API Routes | API服务 |
| 数据库 | PostgreSQL (Supabase) | 数据存储 |
| AI | MiniMax / DeepSeek | 大语言模型 |
| 部署 | Vercel | 前端托管 |

### 6.2 Multi-Agent架构

```
用户输入
   ↓
意图理解Agent → 解析用户意图
   ↓
Plan Agent → 分解任务
   ↓
Coding Agent → 执行开发
   ↓
Self-Check Agent → 质量检查
   ↓
返回结果给用户
```

---

## 七、开发优先级

### 第一阶段（核心MVP）
| 序号 | 功能 | 预计工作量 |
|------|------|-----------|
| 1 | AI对话系统 | 2天 |
| 2 | 项目信息提取 | 1天 |
| 3 | 大纲模板 | 1天 |
| 4 | 报告生成 | 2天 |
| 5 | 报告预览 | 1天 |
| 6 | 导出功能 | 1天 |

### 第二阶段（用户系统）
| 序号 | 功能 | 预计工作量 |
|------|------|-----------|
| 7 | 注册登录 | 2天 |
| 8 | 报告存储 | 1天 |

### 第三阶段（扩展功能）
| 序号 | 功能 | 预计工作量 |
|------|------|-----------|
| 9 | 积分系统 | 3天 |
| 10 | PDF导出 | 2天 |
| 11 | 编辑功能 | 2天 |

---

## 八、验收标准

### 8.1 核心功能验收

| 功能 | 验收条件 |
|------|----------|
| AI对话 | 能理解"帮我写报告"，能追问缺失信息 |
| 信息提取 | 能正确提取名称、地点、类型 |
| 大纲模板 | 显示完整11章大纲，支持行业切换 |
| 报告生成 | 能生成完整报告，至少3章 |
| 报告预览 | 右侧实时显示，布局正确 |
| 导出 | 点击下载Markdown文件 |

### 8.2 质量标准

- 对话响应时间 < 3秒
- 报告生成时间 < 30秒
- 界面无明显卡顿
- 导出文件完整可读

---

## 九、后续迭代

- 集成微信支付
- 支持PDF导出
- 用户自定义模板
- 多人协作
- 企业私有化部署

---

*文档持续更新中...*